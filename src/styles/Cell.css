:root {
  --cell-size: clamp(32px, 5vw, 50px);
  --ball-size: calc(var(--cell-size) * 0.75);
  --ball-offset: calc((var(--cell-size) - var(--ball-size)) / 2);
}

.cell {
  width: var(--cell-size);
  height: var(--cell-size);
  border: 1px solid #aaa;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  background-color: #e8e8e8;
  position: relative;
  transition: background-color 0.2s;
}

.cell:hover {
  background-color: #d0d0d0;
}

.cell.selected {
  background-color: #c8e6ff;
}

.cell.ball {
  position: relative;
}

.ball-inner {
  width: var(--ball-size);
  height: var(--ball-size);
  border-radius: 50%;
  box-shadow: inset -3px -3px 5px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2);
  transition: transform 0.2s;
}

.cell:hover .ball-inner {
  transform: scale(1.05);
}

/* Ball colors */
.ball-red .ball-inner {
  background: radial-gradient(circle at 30% 30%, #ff6b6b, #d00);
}

.ball-blue .ball-inner {
  background: radial-gradient(circle at 30% 30%, #6b9aff, #0044d0);
}

.ball-green .ball-inner {
  background: radial-gradient(circle at 30% 30%, #6bff9a, #00d044);
}

.ball-yellow .ball-inner {
  background: radial-gradient(circle at 30% 30%, #fff06b, #d0ac00);
}

.ball-purple .ball-inner {
  background: radial-gradient(circle at 30% 30%, #d26bff, #7700d0);
}

.ball-cyan .ball-inner {
  background: radial-gradient(circle at 30% 30%, #6bffff, #00a0d0);
}

.ball-orange .ball-inner {
  background: radial-gradient(circle at 30% 30%, #ffa06b, #d06000);
}

/* Path animation */
.cell.path {
  background-color: #f0f8ff;
  transition: background-color 0.3s;
}

.path-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background-color: #b3d9ff;
  animation: pulse 1s infinite;
}

/* Styling for different steps of the path */
.cell.path-step-1 { animation: pathAppear 0.3s ease-in-out forwards; animation-delay: 0.05s; }
.cell.path-step-2 { animation: pathAppear 0.3s ease-in-out forwards; animation-delay: 0.1s; }
.cell.path-step-3 { animation: pathAppear 0.3s ease-in-out forwards; animation-delay: 0.15s; }
.cell.path-step-4 { animation: pathAppear 0.3s ease-in-out forwards; animation-delay: 0.2s; }
.cell.path-step-5 { animation: pathAppear 0.3s ease-in-out forwards; animation-delay: 0.25s; }
.cell.path-step-6 { animation: pathAppear 0.3s ease-in-out forwards; animation-delay: 0.3s; }
.cell.path-step-7 { animation: pathAppear 0.3s ease-in-out forwards; animation-delay: 0.35s; }
.cell.path-step-8 { animation: pathAppear 0.3s ease-in-out forwards; animation-delay: 0.4s; }
.cell.path-step-9 { animation: pathAppear 0.3s ease-in-out forwards; animation-delay: 0.45s; }
.cell.path-step-10 { animation: pathAppear 0.3s ease-in-out forwards; animation-delay: 0.5s; }

.cell.path-step-1 .path-dot { animation-delay: 0s; }
.cell.path-step-2 .path-dot { animation-delay: 0.1s; }
.cell.path-step-3 .path-dot { animation-delay: 0.2s; }
.cell.path-step-4 .path-dot { animation-delay: 0.3s; }
.cell.path-step-5 .path-dot { animation-delay: 0.4s; }
.cell.path-step-6 .path-dot { animation-delay: 0.5s; }
.cell.path-step-7 .path-dot { animation-delay: 0.6s; }
.cell.path-step-8 .path-dot { animation-delay: 0.7s; }
.cell.path-step-9 .path-dot { animation-delay: 0.8s; }
.cell.path-step-10 .path-dot { animation-delay: 0.9s; }

@keyframes pathAppear {
  0% {
    background-color: #e8e8e8;
  }
  100% {
    background-color: #f0f8ff;
  }
}

/* Ball animation */
@keyframes moveAlongPath {
  0% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-20px) scale(1.1);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}

.ball-animated .ball-inner {
  animation: moveAlongPath 0.5s ease-in-out;
}

@keyframes pulse {
  0% {
    transform: scale(0.8);
    opacity: 0.7;
  }
  50% {
    transform: scale(1.2);
    opacity: 1;
  }
  100% {
    transform: scale(0.8);
    opacity: 0.7;
  }
}

/* Ball moving animation */
.moving-ball {
  position: absolute;
  border-radius: 50%;
  z-index: 9999; /* Extremely high z-index to be above all elements */
  transition: left 0.25s ease-in-out, top 0.25s ease-in-out;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  pointer-events: none; /* Prevent interference with clicks */
  /* Width and height are now set dynamically in JS */
  /* Will be positioned relative to body for maximum visibility */
}

/* Ensure ball inner is visible */
.moving-ball .ball-inner {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  box-shadow: inset -3px -3px 5px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2);
  position: relative;
}

/* Define specific colors for the ball inner divs during animation */
.ball-red-inner {
  background: radial-gradient(circle at 30% 30%, #ff6b6b, #d00);
}

.ball-blue-inner {
  background: radial-gradient(circle at 30% 30%, #6b9aff, #0044d0);
}

.ball-green-inner {
  background: radial-gradient(circle at 30% 30%, #6bff9a, #00d044);
}

.ball-yellow-inner {
  background: radial-gradient(circle at 30% 30%, #fff06b, #d0ac00);
}

.ball-purple-inner {
  background: radial-gradient(circle at 30% 30%, #d26bff, #7700d0);
}

.ball-cyan-inner {
  background: radial-gradient(circle at 30% 30%, #6bffff, #00a0d0);
}

.ball-orange-inner {
  background: radial-gradient(circle at 30% 30%, #ffa06b, #d06000);
}

/* Separate jump animation */
@keyframes jumpBall {
  0% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-20px) scale(1.1);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}

/* Line completion animation */
@keyframes lineCompleteFlash {
  0% {
    transform: scale(1);
    filter: brightness(1);
  }
  50% {
    transform: scale(1.15);
    filter: brightness(1.5);
  }
  100% {
    transform: scale(1);
    filter: brightness(1);
  }
}

@keyframes lineCompleteDisappear {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  75% {
    transform: scale(1.2);
    opacity: 0.5;
  }
  100% {
    transform: scale(0);
    opacity: 0;
  }
}

.cell.line-complete .ball-inner {
  animation: lineCompleteFlash 0.5s ease-in-out 2, lineCompleteDisappear 0.8s ease-in-out 1s forwards;
}

/* Special animation for each ball in the line based on position */
.cell.line-pos-1 .ball-inner { animation-delay: 0s, 1s; }
.cell.line-pos-2 .ball-inner { animation-delay: 0.1s, 1.1s; }
.cell.line-pos-3 .ball-inner { animation-delay: 0.2s, 1.2s; }
.cell.line-pos-4 .ball-inner { animation-delay: 0.3s, 1.3s; }
.cell.line-pos-5 .ball-inner { animation-delay: 0.4s, 1.4s; }
.cell.line-pos-6 .ball-inner { animation-delay: 0.5s, 1.5s; }
.cell.line-pos-7 .ball-inner { animation-delay: 0.6s, 1.6s; }
.cell.line-pos-8 .ball-inner { animation-delay: 0.7s, 1.7s; }
.cell.line-pos-9 .ball-inner { animation-delay: 0.8s, 1.8s; }

@keyframes selectedBallJump {
  0%, 100% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-8px) scale(1.1);
  }
}

.cell.selected .ball-inner {
  animation: selectedBallJump 0.8s ease-in-out infinite;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.8), inset -3px -3px 5px rgba(0, 0, 0, 0.3);
}

/* Additional classes for animation effects */
.moving-ball.jumping {
  z-index: 9999; /* Extremely high z-index to be above all elements */
  box-shadow: none !important; /* Remove shadow when jumping */
}

.moving-ball.jumping .ball-inner {
  animation: jumpBall 0.3s ease-in-out;
  box-shadow: none !important; /* Remove shadow from inner ball when jumping */
} 